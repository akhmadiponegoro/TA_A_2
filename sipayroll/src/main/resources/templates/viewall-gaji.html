<!DOCTYPE html>
<html lang="en" xmlns:th="http://thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title> Daftar Gaji </title>
    <object th:include="fragments/fragment :: css" th:remove="tag"></object>
    <object th:include="fragments/fragment :: js" th:remove="tag"></object>
</head>
<body>
<nav th:replace="fragments/fragment :: navbar"></nav>

<div class="container-fluid">
    <br>
    <div style="height: 50px;font-weight:bold;font-family: Poppins;padding-left: 500px;">
        <h2>Daftar Gaji</h2>
    </div>
    <br>
    <div>
        <table class="table" style="border-radius:6px; -moz-border-radius:6px;">
            <thead style="background-color: #0076fc;color:white;">
            <tr>
                <th> Nama Pegawai </th>
                <th> Gaji </th>
                <th> Total Pendapatan </th>
                <th> Lihat </th>
                <th> Ubah Data </th>
                <div th:if="${#strings.equals(role.determineRole(#httpServletRequest.userPrincipal.name),'Kepala Departemen HR')}">
                    <th>Ubah Status Persetujuan</th>
                </div>
                <th> Hapus </th>
                <th></th>
            </tr>
            </thead>
            <tbody>
            <div th:each="gaji, iterStat : ${listGaji}" >
                <td th:text="${gaji.user.username}"></td>
                <td th:text="${gaji.gajiPokok}"></td>
                <td th:text="${listTotalPendapatan[iterStat.index]}"></td>
               <div th:each="total : ${listTotalPendapatan}">
                   <td th:text="${total}"></td>
                </div>
                <td><a class="btn btn-info" th:href="@{/gaji/}+${gaji.id}+'/'+${gaji.user.username}" >Lihat</a></td>
                <td><a class="btn btn-warning" th:href="@{/gaji/ubah/}+${gaji.id}">Ubah</a></td>
                <div th:if="${#strings.equals(role.determineRole(#httpServletRequest.userPrincipal.name),'Kepala Departemen HR')}">
                    <td><a class="btn btn-warning" th:href="@{/gaji/change/status/}+${gaji.id}">Ubah Status</a></td>
                </div>
                <td><a class="btn btn-danger" th:href="@{/gaji/delete/id/}+${gaji.id}">Hapus </a></td>


                </tr>
            </div>
            </tbody>
        </table>
        <th><a class="btn btn-info btn-lg col-2 " th:href="@{/gaji/add}"> Tambah Gaji</a></th>
    </div>

</div>
<a class="btn btn-primary ml-3" href ="/">Home</a>
</body>
</html>